set(RT_TDDFT_INCLUDES
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/headers
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/matutils
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/canorg
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/rtutils
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/input
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/propagators
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/openshell
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/init
${PROJECT_SOURCE_DIR}/src/nwdft/rt_tddft/closedshell
)

set(RT_TDDFT_SOURCE_FILES
./rt_tddft.F
./matutils/zmat_inv.F
./matutils/convert_d2z.F
./matutils/zmat_diag.F
./matutils/zmat_compare.F
./matutils/zmat_spectral_range.F
./matutils/pack_ga2buffer.F
./matutils/ga_zadd.F
./matutils/dmat_io.F
./matutils/convert_z2d.F
./matutils/elem_compare.F
./matutils/matutils.F
./matutils/zmat_max_abs_elem.F
./matutils/zmat_checksum.F
./matutils/pack_buffer2ga.F
./matutils/calc_array_partitioning.F
./canorg/canorg_clean.F
./canorg/canorg_init.F
./canorg/canorg_trans.F
./canorg/canorg_check.F
./rtutils/rt_tddft_project.F
./rtutils/rt_tddft_debug.F
./rtutils/rt_tddft_mocap.F
./rtutils/rt_tddft_calc_dip_contribs.F
./rtutils/rt_tddft_zdens_tot_movecs.F
./rtutils/rt_tddft_movecs_gs.F
./rtutils/rt_tddft_vec_quad.F
./rtutils/rt_tddft_moocc.F
./rtutils/rt_tddft_geom_mask.F
./rtutils/rt_tddft_calc.F
./rtutils/rt_tddft_atpoint.F
./rtutils/rt_tddft_restart.F
./rtutils/rt_tddft_excite.F
./rtutils/rt_tddft_movecs_import.F
./rtutils/rt_tddft_estimate_rem.F
./rtutils/rt_tddft_checkpoint.F
./rtutils/rt_tddft_output.F
./rtutils/rt_tddft_snapshot.F
./rtutils/rt_tddft_zora_scale.F
./rtutils/rt_tddft_header.F
./input/rt_tddft_input_put_defaults.F
./input/rt_tddft_input_excite.F
./input/rt_tddft_input_print.F
./input/rt_tddft_input_tolerances.F
./input/rt_tddft_input_visualization.F
#./input/rt_tddft_input_propagator.F
./input/rt_tddft_input_field.F
./input/rt_tddft_input_mocap.F
./input/rt_tddft_input.F
./propagators/prop_magnus_ord2_interpol.F
./propagators/prop_magnus_exp_bch.F
./propagators/exp_pseries.F
./propagators/prop_magnus_ord2_step.F
./propagators/exp_diag.F
./propagators/prop_euler.F
./propagators/prop_magnus_exp_bch_scaled.F
./openshell/zfock_os_core_scalarzora.F
./openshell/zfock_os_dftxc.F
./openshell/rt_tddft_os_restart.F
./openshell/rt_tddft_os_init.F
./openshell/rt_tddft_os_print.F
./openshell/zfock_os_build.F
./openshell/rt_tddft_os_tdfock.F
./openshell/zfock_os_exch.F
./openshell/rt_tddft_os_checkpoint.F
./openshell/zfock_os_core.F
./openshell/zfock_os_coulcdfit.F
./openshell/rt_tddft_os_confirm.F
./openshell/rt_tddft_os_prop.F
./openshell/zfock_os_coul.F
./init/rt_tddft_init_common.F
./init/rt_tddft_init_overlap_canorg.F
./init/rt_tddft_init_dip_quad_ints.F
./init/rt_tddft_init_fock2e.F
./init/task_rt_tddft.F
./init/rt_tddft_init_geoms.F
./init/rt_tddft_init_rtdb.F
./init/rt_tddft_clean.F
./init/rt_tddft_init_check_params.F
./init/rt_tddft_init_zora.F
./init/rt_tddft_init_coulcdfit.F
./closedshell/rt_tddft_cs_restart.F
./closedshell/zfock_cs_dftxc.F
./closedshell/rt_tddft_cs_confirm.F
./closedshell/rt_tddft_cs_checkpoint.F
./closedshell/zfock_cs_core.F
./closedshell/zfock_cs_build.F
./closedshell/zfock_cs_coulcdfit.F
./closedshell/zfock_cs_core_scalarzora.F
./closedshell/zfock_cs_exch.F
./closedshell/rt_tddft_cs_prop.F
./closedshell/rt_tddft_cs_tdfock.F
./closedshell/zfock_cs_coul_exchre.F
./closedshell/rt_tddft_cs_init.F
./closedshell/zfock_cs_coul.F
./closedshell/zfock_cs_exchim.F
)

add_library(rt_tddft OBJECT ${RT_TDDFT_SOURCE_FILES})
target_compile_definitions(rt_tddft PUBLIC DEBUG_PRINT)
target_include_directories(rt_tddft PUBLIC ${NWC_INCLUDES} ${NWDFT_INCLUDES} ${RT_TDDFT_INCLUDES})

if ("${CMAKE_Fortran_COMPILER_ID}" STREQUAL "GNU")
  target_compile_options(rt_tddft PUBLIC ${NWCHEM_Fortran_COMPILE_FLAGS} ${NWCHEM_Fortran_DEBUG_FLAGS} -ffixed-line-length-none)
else()
  target_compile_options(rt_tddft PUBLIC ${NWCHEM_Fortran_COMPILE_FLAGS} ${NWCHEM_Fortran_DEBUG_FLAGS})
endif()
#target_compile_options(rt_tddft PUBLIC ${NWCHEM_Fortran_OPTIMIZE_FLAGS})

